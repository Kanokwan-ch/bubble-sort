<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Algorithm Sorting Games - Final Version</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@400;600&display=swap');
  /* --- ‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡∏´‡∏•‡∏±‡∏Å --- */
  body { font-family: 'Kanit', sans-serif; background: linear-gradient(135deg, #d0e6f7, #f0f8ff); margin: 0; padding: 20px; display: flex; justify-content: center; align-items: center; min-height: 100vh; overflow: hidden; position: relative; }
  .container { background: white; border-radius: 25px; box-shadow: 0 12px 25px rgba(0,0,0,0.12); padding: 2rem 1.5rem; max-width: 700px; width: 90%; box-sizing: border-box; text-align: center; z-index: 10; }
  .screen { display: none; }
  .screen.active { display: block; }
  h1, h2, h3 { text-align: center; color: #3b3b98; margin-top: 0; margin-bottom: 2rem; font-size: 2.5rem; text-shadow: 1px 1px 3px rgba(0,0,0,0.1); }
  h3 { font-size: 1.8rem; }
  button { font-family: 'Kanit', sans-serif; border: none; cursor: pointer; transition: all 0.3s ease; font-weight: 600; user-select: none; }
  
  /* --- ‚ñº‚ñº‚ñº CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å ‚ñº‚ñº‚ñº --- */
  #mainMenu h1 { font-size: 3rem; margin-bottom: 0.5rem; }
  .main-subtitle { font-size: 1.2rem; color: #64748b; margin-top: 0; margin-bottom: 2.5rem; }
  .game-selection-btn { display: flex; align-items: center; justify-content: center; gap: 0.8rem; width: 90%; max-width: 400px; margin: 1rem auto; padding: 1.2rem 0; border-radius: 35px; font-size: 1.5rem; color: white; }
  .game-selection-btn:hover { transform: translateY(-3px) scale(1.02); }
  #btnBubbleSort { background: linear-gradient(135deg, #74b9ff, #0984e3); box-shadow: 0 8px 16px rgba(116, 185, 255, 0.6); }
  #btnSelectionSort { background: linear-gradient(135deg, #e0bbe4, #957dad); box-shadow: 0 8px 16px rgba(149, 125, 173, 0.6); }
  #btnInsertionSort { background: linear-gradient(135deg, #f6d365, #fda085); box-shadow: 0 8px 16px rgba(253, 160, 133, 0.6); }

  .bubble-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; overflow: hidden; }
  .bubble-background li { position: absolute; display: block; list-style: none; width: 20px; height: 20px; background: rgba(255, 255, 255, 0.2); animation: animateBubbles 25s linear infinite; bottom: -150px; }
  .bubble-background li:nth-child(1) { left: 25%; width: 80px; height: 80px; animation-delay: 0s; }
  .bubble-background li:nth-child(2) { left: 10%; width: 20px; height: 20px; animation-delay: 2s; animation-duration: 12s; }
  .bubble-background li:nth-child(3) { left: 70%; width: 20px; height: 20px; animation-delay: 4s; }
  .bubble-background li:nth-child(4) { left: 40%; width: 60px; height: 60px; animation-delay: 0s; animation-duration: 18s; }
  .bubble-background li:nth-child(5) { left: 65%; width: 20px; height: 20px; animation-delay: 0s; }
  .bubble-background li:nth-child(6) { left: 75%; width: 110px; height: 110px; animation-delay: 3s; }
  .bubble-background li:nth-child(7) { left: 35%; width: 150px; height: 150px; animation-delay: 7s; }
  .bubble-background li:nth-child(8) { left: 50%; width: 25px; height: 25px; animation-delay: 15s; animation-duration: 45s; }
  .bubble-background li:nth-child(9) { left: 20%; width: 15px; height: 15px; animation-delay: 2s; animation-duration: 35s; }
  .bubble-background li:nth-child(10) { left: 85%; width: 150px; height: 150px; animation-delay: 0s; animation-duration: 11s; }
  @keyframes animateBubbles { 0% { transform: translateY(0) rotate(0deg); opacity: 1; border-radius: 0; } 100% { transform: translateY(-1000px) rotate(720deg); opacity: 0; border-radius: 50%; } }
  /* --- ‚ñ≤‚ñ≤‚ñ≤ ‡∏à‡∏ö‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å ‚ñ≤‚ñ≤‚ñ≤ --- */

  /* ... (CSS ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ... */
  .level-selection h2 { margin-bottom: 1rem; } .level-selection p { color: #6b7280; margin-bottom: 2rem; font-size: 1.1rem; } .level-buttons { display: flex; justify-content: center; gap: 1rem; margin-bottom: 1.5rem; } .level-btn { flex: 1; padding: 1rem 0; border-radius: 35px; background: linear-gradient(135deg, #a3cef1, #6a9fb5); color: #fff; font-size: 1.1rem; max-width: 140px; box-shadow: 0 6px 12px rgba(106, 159, 181, 0.7); border: 3px solid transparent; } .level-btn.active, .level-btn:hover { background: linear-gradient(135deg, #6a9fb5, #a3cef1); box-shadow: 0 10px 20px rgba(106, 159, 181, 0.9); transform: translateY(-3px); } .level-btn.active { border-color: #3b3b98; } .level-actions { display: flex; justify-content: center; gap: 1rem; margin-top: 1.5rem; flex-wrap: wrap; } .action-btn { flex: 1; min-width: 180px; max-width: 220px; padding: 1rem 0; border-radius: 35px; font-size: 1.2rem; } .rules-btn { background: linear-gradient(135deg, #e0bbe4, #957dad); color: #fff; box-shadow: 0 6px 12px rgba(149, 125, 173, 0.7); } .start-game-btn { background: linear-gradient(135deg, #86efac, #22c55e); color: #14532d; box-shadow: 0 6px 12px rgba(34, 197, 94, 0.5); }
  .bubble-box { display: flex; justify-content: center; gap: 1.2rem; flex-wrap: wrap; margin: 2rem 0 1.5rem; } .bubble { background: #ffeaa7; border-radius: 50%; width: 70px; height: 70px; font-weight: 700; color: #2d3436; position: relative; box-shadow: 0 5px 15px rgba(255, 234, 167, 0.6); display: flex; justify-content: center; align-items: center; font-size: 1.8rem; transition: all 0.3s ease; } .sorted { background: #55efc4 !important; color: #2d3436 !important; box-shadow: 0 6px 20px rgba(0, 184, 148, 0.9) !important; } .comparing { background: #fab1a0 !important; color: #2c2c54 !important; box-shadow: 0 6px 20px rgba(250, 177, 160, 0.9) !important; animation: pulse 1.5s infinite; } .action-success { background-color: #2ecc71 !important; color: white !important; transform: scale(1.1) !important; } @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
  .explanation, .description { background: #e7f5ff; border-left: 6px solid #74b9ff; border-radius: 15px; font-weight: 500; color: #0984e3; padding: 1rem; margin-bottom: 1.5rem; min-height: 40px; display: flex; justify-content: center; align-items: center; } .game-controls button { min-width: 110px; font-size: 1.1rem; padding: 0.8rem 1.2rem; margin: 0.4rem; border-radius: 30px; background: linear-gradient(135deg, #74b9ff, #0984e3); color: #fff; box-shadow: 0 6px 14px rgba(116, 185, 255, 0.65); } .game-controls button:disabled { background: #bdc3c7; cursor: not-allowed; box-shadow: none; transform: none; color: #7f8c8d; }
  .popup { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #fff; border-radius: 25px; box-shadow: 0 20px 40px rgba(0,0,0,0.3); padding: 2rem; width: 90%; max-width: 500px; z-index: 1000; text-align: center; } .popup h3 { color: #6c5ce7; margin-top: 0; margin-bottom: 1rem; text-align: center; } .popup p, .popup ul { color: #2d3436; font-size: 1.1rem; line-height: 1.6; text-align: left; } .popup ul { list-style-position: inside; padding-left: 0; } .popup-actions { margin-top: 1.5rem; text-align: center; } .popup-btn { min-width: 120px; font-size: 1.1rem; padding: 0.8rem 1.5rem; margin: 0.5rem; border-radius: 25px; background: linear-gradient(135deg, #6c5ce7, #a29bfe); color: white; box-shadow: 0 6px 15px rgba(108, 92, 231, 0.8); }
  .arrow-icon, .star-icon { position: absolute; left: 50%; transform: translateX(-50%); font-size: 1.6rem; pointer-events: none; user-select: none; } .arrow-icon { bottom: -30px; color: #d63031; animation: bounce 1.5s infinite; } .star-icon { top: -30px; color: #e84393; animation: glow 1.8s ease-in-out infinite; } @keyframes bounce { 0%, 100% { transform: translateX(-50%) translateY(0); } 50% { transform: translateX(-50%) translateY(-10px); } } @keyframes glow { 0%,100% { opacity: 1; } 50% { opacity: 0.5; } }
</style>
</head>
<body>

<!-- ‚ñº‚ñº‚ñº HTML ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á Bubble ‚ñº‚ñº‚ñº -->
<div class="bubble-background">
  <ul class="bubbles"> <li></li> <li></li> <li></li> <li></li> <li></li> <li></li> <li></li> <li></li> <li></li> <li></li> </ul>
</div>

<div class="container">
  <!-- ‚ñº‚ñº‚ñº HTML ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‚ñº‚ñº‚ñº -->
  <div id="mainMenu" class="screen active">
    <h1>Algorithm Sorting Games</h1>
    <p class="main-subtitle">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏±‡∏•‡∏Å‡∏≠‡∏£‡∏¥‡∏ó‡∏∂‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏ô‡∏∏‡∏Å‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!</p>
    <button data-game="bubble" class="game-selection-btn">ü´ß Bubble Sort</button>
    <button data-game="selection" class="game-selection-btn">üåü Selection Sort</button>
    <button data-game="insertion" class="game-selection-btn">üìç Insertion Sort</button>
  </div>
  
  <div id="levelSelection" class="screen level-selection">
    <h2 id="levelSelectionTitle"></h2>
    <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á</p>
    <div class="level-buttons">
      <button class="level-btn" data-level="1">‡∏£‡∏∞‡∏î‡∏±‡∏ö 1</button>
      <button class="level-btn" data-level="2">‡∏£‡∏∞‡∏î‡∏±‡∏ö 2</button>
      <button class="level-btn" data-level="3">‡∏£‡∏∞‡∏î‡∏±‡∏ö 3</button>
    </div>
    <div class="level-actions">
      <button id="rulesBtn" class="action-btn rules-btn">üìú ‡∏≠‡πà‡∏≤‡∏ô‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤</button>
      <button id="startGameBtn" class="action-btn start-game-btn" disabled>üéÆ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
    </div>
    <div class="game-controls"><button class="back-to-main">üè† ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</button></div>
  </div>

  <!-- ... (HTML ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°) ... -->
  <div id="finalScreen" class="screen"> <h2 id="finalTitle">üéâ ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å! üéâ</h2> <p id="finalMessage" style="font-size: 1.2rem; color: #3b3b98;"></p> <div class="popup-actions"> <button id="final_back_to_levels" class="popup-btn">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πà‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</button> <button class="back-to-main popup-btn">‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</button> </div> </div>
  <div id="bubbleGame" class="screen"> <h2>‚ú® Bubble Sort (‡∏î‡πà‡∏≤‡∏ô <span class="level-display"></span>)</h2> <div class="bubble-box" id="bubble_game_container"></div> <div class="explanation" id="bubble_feedback"></div> <div class="game-controls"> <button id="bubble_swap">üîÑ ‡∏™‡∏•‡∏±‡∏ö</button> <button id="bubble_no_swap">‚úÖ ‡πÑ‡∏°‡πà‡∏™‡∏•‡∏±‡∏ö</button> <button id="bubble_new_game">üé≤ ‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button> </div> <div class="game-controls"><button class="back-to-levels">‚óÄÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πà‡∏≤‡∏ô</button></div> </div>
  <div id="selectionGame" class="screen"> <h2>üå∏ Selection Sort (‡∏î‡πà‡∏≤‡∏ô <span class="level-display"></span>)</h2> <div class="bubble-box" id="selection_game_container"></div> <div class="description" id="selection_description"></div> <div class="game-controls"> <button id="selection_next_step">‚û°Ô∏è ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ</button> <button id="selection_new_game">üé≤ ‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button> </div> <div class="game-controls"><button class="back-to-levels">‚óÄÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πà‡∏≤‡∏ô</button></div> </div>
  <div id="insertionGame" class="screen"> <h2>üåü Insertion Sort (‡∏î‡πà‡∏≤‡∏ô <span class="level-display"></span>)</h2> <div class="bubble-box" id="insertion_game_container"></div> <div class="explanation" id="insertion_explanation"></div> <div class="game-controls"> <button id="insertion_swap">üîÑ ‡∏™‡∏•‡∏±‡∏ö</button> <button id="insertion_no_swap">‚úÖ ‡πÑ‡∏°‡πà‡∏™‡∏•‡∏±‡∏ö</button> <button id="insertion_insert" disabled>üìç ‡πÅ‡∏ó‡∏£‡∏Å</button> <button id="insertion_new_game">üé≤ ‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button> </div> <div class="game-controls"><button class="back-to-levels">‚óÄÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡πà‡∏≤‡∏ô</button></div> </div>
</div>

<div class="popup" id="rulesPopup"> <h3 id="rulesTitle"></h3> <div id="rulesContent"></div> <div class="popup-actions"> <button id="rules_play_now" class="popup-btn">üéÆ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏•‡∏¢!</button> </div> </div>
<div class="popup" id="summaryPopup"> <h3 id="summaryTitle"></h3> <p id="summaryText"></p> <div class="popup-actions"> <button id="summary_next_level" class="popup-btn">‡πÑ‡∏õ‡∏î‡πà‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button> <button id="summary_play_again" class="popup-btn">‡πÄ‡∏•‡πà‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button> <button id="summary_back_to_main" class="popup-btn">‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</button> </div> </div>

<script>
  // JavaScript ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
  document.addEventListener('DOMContentLoaded', () => {
    const screens = { mainMenu: document.getElementById('mainMenu'), levelSelection: document.getElementById('levelSelection'), bubble: document.getElementById('bubbleGame'), selection: document.getElementById('selectionGame'), insertion: document.getElementById('insertionGame'), final: document.getElementById('finalScreen'), };
    const popups = { summary: document.getElementById('summaryPopup'), rules: document.getElementById('rulesPopup') };
    const summaryTitle = document.getElementById('summaryTitle'), summaryText = document.getElementById('summaryText');
    const levelSelectionTitle = document.getElementById('levelSelectionTitle'), levelButtons = document.querySelectorAll('#levelSelection .level-btn'), startGameBtn = document.getElementById('startGameBtn');
    const rulesTitle = document.getElementById('rulesTitle'), rulesContent = document.getElementById('rulesContent');
    let activeGame = null, selectedLevel = null;
    const levelSettings = { 1: 5, 2: 7, 3: 9 };

    const rulesData = { bubble: { title: 'üìñ ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ Bubble Sort', content: `<ul><li>‡πÄ‡∏Å‡∏°‡∏à‡∏∞‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå‡πÄ‡∏•‡∏Ç 2 ‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÉ‡∏´‡πâ‡πÇ‡∏î‡∏¢‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</li><li>‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏Ç‡∏ï‡∏±‡∏ß‡∏ã‡πâ‡∏≤‡∏¢ <strong>‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤</strong> ‡∏ï‡∏±‡∏ß‡∏Ç‡∏ß‡∏≤ ‡πÉ‡∏´‡πâ‡∏Å‡∏î <strong>‡∏™‡∏•‡∏±‡∏ö</strong></li><li>‡∏ñ‡πâ‡∏≤‡πÄ‡∏•‡∏Ç‡∏ï‡∏±‡∏ß‡∏ã‡πâ‡∏≤‡∏¢ <strong>‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö</strong> ‡∏ï‡∏±‡∏ß‡∏Ç‡∏ß‡∏≤ ‡πÉ‡∏´‡πâ‡∏Å‡∏î <strong>‡πÑ‡∏°‡πà‡∏™‡∏•‡∏±‡∏ö</strong></li><li>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÑ‡∏Æ‡πÑ‡∏•‡∏ó‡πå‡∏Ñ‡∏π‡πà‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏á</li></ul>` }, selection: { title: 'üìñ ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ Selection Sort', content: `<ul><li>‡πÄ‡∏Å‡∏°‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</li><li>‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° <strong>"‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ"</strong> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</li><li><strong>‡∏î‡∏≤‡∏ß üåü</strong> ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏û‡∏ö‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡∏ô‡∏±‡πâ‡∏ô</li><li><strong>‡∏•‡∏π‡∏Å‡∏®‡∏£ üîΩ</strong> ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö</li></ul>` }, insertion: { title: 'üìñ ‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ Insertion Sort', content: `<ul><li>‡∏Å‡∏î <strong>"‡∏™‡∏•‡∏±‡∏ö"</strong> ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö (‡∏™‡∏µ‡πÅ‡∏î‡∏á) ‡∏Å‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢</li><li>‡∏Å‡∏î <strong>"‡πÑ‡∏°‡πà‡∏™‡∏•‡∏±‡∏ö"</strong> ‡∏´‡∏≤‡∏Å‡πÄ‡∏•‡∏Ç‡∏™‡∏µ‡πÅ‡∏î‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢</li><li>‡∏Å‡∏î <strong>"‡πÅ‡∏ó‡∏£‡∏Å"</strong> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏Ç‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÄ‡∏•‡∏Ç‡∏ï‡∏±‡∏ß‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</li></ul>` } };
    function showScreen(screenName) { Object.values(screens).forEach(s => s.classList.remove('active')); screens[screenName].classList.add('active'); }
    function showPopup(popupName) { Object.values(popups).forEach(p => p.style.display = 'none'); popups[popupName].style.display = 'block'; }
    function hideAllPopups() { Object.values(popups).forEach(p => p.style.display = 'none'); }
    function showSummary(title, text, isLastLevel) { summaryTitle.textContent = title; summaryText.innerHTML = text; document.getElementById('summary_next_level').style.display = isLastLevel ? 'none' : 'inline-block'; showPopup('summary'); }
    document.querySelectorAll('.game-selection-btn').forEach(btn => { btn.onclick = () => { const gameKey = btn.dataset.game; activeGame = window[gameKey + 'SortGame']; levelSelectionTitle.textContent = btn.textContent; showScreen('levelSelection'); levelButtons.forEach(b => b.classList.remove('active')); startGameBtn.disabled = true; selectedLevel = null; }; });
    levelButtons.forEach(btn => { btn.addEventListener('click', () => { levelButtons.forEach(b => b.classList.remove('active')); btn.classList.add('active'); selectedLevel = parseInt(btn.dataset.level); startGameBtn.disabled = false; }); });
    document.getElementById('rulesBtn').onclick = () => { if (activeGame) { rulesTitle.textContent = rulesData[activeGame.key].title; rulesContent.innerHTML = rulesData[activeGame.key].content; showPopup('rules'); } };
    document.getElementById('rules_play_now').onclick = () => { hideAllPopups(); if (!selectedLevel) { alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°!'); return; } if (activeGame && selectedLevel) { showScreen(activeGame.key); activeGame.start(selectedLevel); } };
    startGameBtn.onclick = () => { if (activeGame && selectedLevel) { showScreen(activeGame.key); activeGame.start(selectedLevel); } };
    document.querySelectorAll('.back-to-main').forEach(btn => { btn.onclick = () => showScreen('mainMenu'); });
    document.querySelectorAll('.back-to-levels').forEach(btn => { btn.onclick = () => showScreen('levelSelection'); });
    document.getElementById('final_back_to_levels').onclick = () => showScreen('levelSelection');
    document.getElementById('summary_next_level').onclick = () => { hideAllPopups(); if (activeGame && selectedLevel < 3) { selectedLevel++; activeGame.start(selectedLevel); } };
    document.getElementById('summary_play_again').onclick = () => { hideAllPopups(); if(activeGame) activeGame.start(selectedLevel); };
    document.getElementById('summary_back_to_main').onclick = () => { hideAllPopups(); showScreen('mainMenu'); };
    function generateNumbers(count, maxNum) { const arr = []; while(arr.length < count) { let r = Math.floor(Math.random() * maxNum) + 1; if(!arr.includes(r)) arr.push(r); } return arr; }
    function onGameComplete(gameName, level) { const isLastLevel = level >= 3; if (isLastLevel) { document.getElementById('finalMessage').textContent = `‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏° ${gameName} ‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!`; showScreen('final'); } return isLastLevel; }
    window.bubbleSortGame = { key: 'bubble', state: {}, elements: { container: document.getElementById('bubble_game_container'), feedback: document.getElementById('bubble_feedback'), btnSwap: document.getElementById('bubble_swap'), btnNoSwap: document.getElementById('bubble_no_swap'), levelDisplay: document.querySelector('#bubbleGame .level-display') }, start(level) { this.elements.levelDisplay.textContent = level; const count = levelSettings[level]; this.state = { level: level, numbers: generateNumbers(count, 99), i: 0, j: 0, sortedIndices: [], isComparing: false, isActionLocked: false }; this.elements.feedback.textContent = '‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°...'; this.unlockActions(); this.updateUI(); setTimeout(() => this.compare(), 1000); }, lockActions() { this.state.isActionLocked = true; this.elements.btnSwap.disabled = true; this.elements.btnNoSwap.disabled = true; }, unlockActions() { this.state.isActionLocked = false; this.elements.btnSwap.disabled = false; this.elements.btnNoSwap.disabled = false; }, compare() { if(this.state.i >= this.state.numbers.length - 1) return; this.state.isComparing = true; this.elements.feedback.textContent = `üîç ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö ${this.state.numbers[this.state.j]} ‡∏Å‡∏±‡∏ö ${this.state.numbers[this.state.j+1]}`; this.updateUI(); }, handleSwap() { if (!this.state.isComparing || this.state.isActionLocked) return; if(this.state.numbers[this.state.j] > this.state.numbers[this.state.j+1]) { [this.state.numbers[this.state.j], this.state.numbers[this.state.j+1]] = [this.state.numbers[this.state.j+1], this.state.numbers[this.state.j]]; this.runSuccessAnimationAndProceed(); } else { alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ!'); } }, handleNoSwap() { if (!this.state.isComparing || this.state.isActionLocked) return; if(this.state.numbers[this.state.j] <= this.state.numbers[this.state.j+1]) { this.runSuccessAnimationAndProceed(); } else { alert('‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏•‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô!'); } }, runSuccessAnimationAndProceed() { this.lockActions(); this.state.isComparing = false; this.updateUI(); const firstBubble = this.elements.container.children[this.state.j]; const secondBubble = this.elements.container.children[this.state.j+1]; if(firstBubble) firstBubble.classList.add('action-success'); if(secondBubble) secondBubble.classList.add('action-success'); setTimeout(() => { if(firstBubble) firstBubble.classList.remove('action-success'); if(secondBubble) secondBubble.classList.remove('action-success'); this.nextStep(); }, 800); }, nextStep() { this.state.j++; if(this.state.j >= this.state.numbers.length - this.state.i - 1) { this.state.sortedIndices.push(this.state.numbers.length - this.state.i - 1); this.state.i++; this.state.j = 0; } this.updateUI(); if(this.state.i >= this.state.numbers.length - 1) { this.state.sortedIndices = this.state.numbers.map((_,idx) => idx); this.updateUI(); this.elements.feedback.textContent = 'üéâ ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!'; setTimeout(() => { const isLast = onGameComplete('Bubble Sort', this.state.level); showSummary(`üéâ ‡∏à‡∏ö‡∏î‡πà‡∏≤‡∏ô ${this.state.level}!`, '‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÇ‡∏î‡∏¢‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡∏´‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡∏ã‡πâ‡∏≤‡∏¢‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏Ç‡∏ß‡∏≤‡∏Å‡πá‡∏à‡∏∞‡∏™‡∏•‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏Å‡∏±‡∏ô', isLast); }, 1200); } else { setTimeout(() => { this.compare(); this.unlockActions(); }, 400); } }, updateUI() { this.elements.container.innerHTML = ''; this.state.numbers.forEach((num, idx) => { const div = document.createElement('div'); div.textContent = num; div.className = 'bubble'; if (this.state.sortedIndices.includes(idx)) div.classList.add('sorted'); if (this.state.isComparing && (idx === this.state.j || idx === this.state.j + 1)) div.classList.add('comparing'); this.elements.container.appendChild(div); }); }, };
    document.getElementById('bubble_swap').onclick = () => bubbleSortGame.handleSwap(); document.getElementById('bubble_no_swap').onclick = () => bubbleSortGame.handleNoSwap(); document.getElementById('bubble_new_game').onclick = () => bubbleSortGame.start(selectedLevel);
    window.selectionSortGame = { key: 'selection', state: {}, elements: { container: document.getElementById('selection_game_container'), description: document.getElementById('selection_description'), btnNext: document.getElementById('selection_next_step'), levelDisplay: document.querySelector('#selectionGame .level-display') }, start(level) { this.elements.levelDisplay.textContent = level; const count = levelSettings[level]; this.state = { level: level, numbers: generateNumbers(count, 99), i: 0, j: 1, minIndex: 0, sorted: false }; this.elements.description.textContent = '‡∏Å‡∏î ‚Äú‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‚Äù ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°'; this.elements.btnNext.disabled = false; this.updateUI(); }, nextStep() { if (this.state.sorted) return; if (this.state.j < this.state.numbers.length) { if (this.state.numbers[this.state.j] < this.state.numbers[this.state.minIndex]) { this.state.minIndex = this.state.j; this.elements.description.textContent = `üîç ‡πÄ‡∏à‡∏≠‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤! ${this.state.numbers[this.state.j]} ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≠‡∏¢‡∏™‡∏∏‡∏î‡πÉ‡∏´‡∏°‡πà`; } else { this.elements.description.textContent = `üîç ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö ${this.state.numbers[this.state.j]} ‡∏Å‡∏±‡∏ö ${this.state.numbers[this.state.minIndex]}`; } this.state.j++; } else { if (this.state.minIndex !== this.state.i) { [this.state.numbers[this.state.i], this.state.numbers[this.state.minIndex]] = [this.state.numbers[this.state.minIndex], this.state.numbers[this.state.i]]; this.elements.description.textContent = `‚ú® ‡∏™‡∏•‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ${this.state.i + 1} ‡∏Å‡∏±‡∏ö ${this.state.minIndex + 1}`; } else { this.elements.description.textContent = `‚úÖ ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á ${this.state.i + 1} ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß`; } this.state.i++; this.state.j = this.state.i + 1; this.state.minIndex = this.state.i; } if (this.state.i >= this.state.numbers.length - 1) { this.state.sorted = true; this.elements.description.textContent = 'üéâ ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!'; this.elements.btnNext.disabled = true; setTimeout(() => { const isLast = onGameComplete('Selection Sort', this.state.level); showSummary(`üéâ ‡∏à‡∏ö‡∏î‡πà‡∏≤‡∏ô ${this.state.level}!`, '‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏≥‡∏°‡∏≤‡∏™‡∏•‡∏±‡∏ö‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏±‡πâ‡∏ô ‡∏ó‡∏≥‡∏ã‡πâ‡∏≥‡∏à‡∏ô‡∏Ñ‡∏£‡∏ö', isLast); }, 1200); } this.updateUI(); }, updateUI() { this.elements.container.innerHTML = ''; this.state.numbers.forEach((num, idx) => { const div = document.createElement('div'); div.className = 'bubble'; div.textContent = num; if (this.state.sorted || idx < this.state.i) div.classList.add('sorted'); if (!this.state.sorted && idx === this.state.minIndex && this.state.j <= this.state.numbers.length) { const star = document.createElement('div'); star.className = 'star-icon'; star.textContent = 'üåü'; div.appendChild(star); } if (!this.state.sorted && idx === this.state.j - 1) { const arrow = document.createElement('div'); arrow.className = 'arrow-icon'; arrow.textContent = 'üîΩ'; div.appendChild(arrow); } this.elements.container.appendChild(div); }); } };
    document.getElementById('selection_next_step').onclick = () => selectionSortGame.nextStep(); document.getElementById('selection_new_game').onclick = () => selectionSortGame.start(selectedLevel);
    window.insertionSortGame = { key: 'insertion', state: {}, elements: { container: document.getElementById('insertion_game_container'), explanation: document.getElementById('insertion_explanation'), btnSwap: document.getElementById('insertion_swap'), btnNoSwap: document.getElementById('insertion_no_swap'), btnInsert: document.getElementById('insertion_insert'), levelDisplay: document.querySelector('#insertionGame .level-display') }, start(level) { this.elements.levelDisplay.textContent = level; const count = levelSettings[level]; this.state = { level: level, numbers: generateNumbers(count, 99), currentIndex: 1, currentInner: 1, inserted: false }; this.updateUI(); }, handleSwap() { if(this.state.currentInner > 0 && this.state.numbers[this.state.currentInner] < this.state.numbers[this.state.currentInner - 1]) { [this.state.numbers[this.state.currentInner], this.state.numbers[this.state.currentInner - 1]] = [this.state.numbers[this.state.currentInner - 1], this.state.numbers[this.state.currentInner]]; this.state.currentInner--; this.state.inserted = false; this.updateUI(); } else { alert('‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ!'); } }, handleNoSwap() { if(this.state.currentInner === 0 || this.state.numbers[this.state.currentInner] >= this.state.numbers[this.state.currentInner - 1]) { this.state.inserted = true; this.updateUI(); } else { alert('‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏•‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô!'); } }, handleInsert() { if(this.state.currentInner > 0 && this.state.numbers[this.state.currentInner] < this.state.numbers[this.state.currentInner - 1]) { alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ñ‡∏π‡∏Å!'); return; } this.state.currentIndex++; if(this.state.currentIndex >= this.state.numbers.length) { this.completeLevel(); return; } this.state.currentInner = this.state.currentIndex; this.state.inserted = false; this.updateUI(); }, completeLevel() { this.updateUI(); setTimeout(() => { const isLast = onGameComplete('Insertion Sort', this.state.level); const summary = `<ul style="text-align: left; padding-left: 20px;"><li><strong>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô:</strong> ‡πÅ‡∏ö‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô "‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß" ‡πÅ‡∏•‡∏∞ "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á"</li><li><strong>‡∏´‡∏¢‡∏¥‡∏ö‡∏°‡∏≤‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤:</strong> ‡∏´‡∏¢‡∏¥‡∏ö‡πÄ‡∏•‡∏Ç‡∏ï‡∏±‡∏ß‡πÅ‡∏£‡∏Å‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏á"</li><li><strong>‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÅ‡∏•‡∏∞‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á:</strong> ‡∏ô‡∏≥‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏´‡∏¢‡∏¥‡∏ö‡∏°‡∏≤‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà "‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡πâ‡∏ß" ‡∏à‡∏≤‡∏Å‡∏Ç‡∏ß‡∏≤‡πÑ‡∏õ‡∏ã‡πâ‡∏≤‡∏¢</li><li><strong>‡πÅ‡∏ó‡∏£‡∏Å:</strong> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡πÉ‡∏´‡πâ "‡πÅ‡∏ó‡∏£‡∏Å" ‡πÄ‡∏•‡∏Ç‡∏ô‡∏±‡πâ‡∏ô‡∏•‡∏á‡πÑ‡∏õ</li><li><strong>‡∏ó‡∏≥‡∏ã‡πâ‡∏≥:</strong> ‡∏ó‡∏≥‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏°‡∏ã‡πâ‡∏≥‡∏à‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß</li></ul>`; showSummary(`üéâ ‡∏à‡∏ö‡∏î‡πà‡∏≤‡∏ô ${this.state.level}!`, summary, isLast); }, 1200); }, updateUI() { this.elements.container.innerHTML = ''; this.state.numbers.forEach((num, i) => { const div = document.createElement('div'); div.textContent = num; div.className = 'bubble'; if(this.state.currentIndex >= this.state.numbers.length || i < this.state.currentIndex || (i === this.state.currentInner && this.state.inserted)) { div.classList.add('sorted'); } if(i === this.state.currentInner && !this.state.inserted && this.state.currentIndex < this.state.numbers.length) { div.classList.add('comparing'); const arrow = document.createElement('div'); arrow.className = 'arrow-icon'; arrow.textContent = '‚¨áÔ∏è'; div.appendChild(arrow); } this.elements.container.appendChild(div); }); if(this.state.currentIndex >= this.state.numbers.length) { this.elements.explanation.textContent = 'üéâ ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!'; } else if(!this.state.inserted) { this.elements.explanation.textContent = `üîç ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏•‡∏Ç ${this.state.numbers[this.state.currentInner]}...`; } else { this.elements.explanation.textContent = '‚úÖ ‡∏Å‡∏î "‡πÅ‡∏ó‡∏£‡∏Å" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ï‡∏±‡∏ß‡∏ñ‡∏±‡∏î‡πÑ‡∏õ'; } this.elements.btnInsert.disabled = !this.state.inserted; this.elements.btnSwap.disabled = this.state.inserted; this.elements.btnNoSwap.disabled = this.state.inserted; } };
    document.getElementById('insertion_swap').onclick = () => insertionSortGame.handleSwap(); document.getElementById('insertion_no_swap').onclick = () => insertionSortGame.handleNoSwap(); document.getElementById('insertion_insert').onclick = () => insertionSortGame.handleInsert(); document.getElementById('insertion_new_game').onclick = () => insertionSortGame.start(selectedLevel);

    showScreen('mainMenu');
});
</script>

</body>
</html>
